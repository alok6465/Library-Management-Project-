{% extends "base.html" %}

{% block content %}
<div class="search-header">
    <h2><i class="bi bi-search"></i> Search Results</h2>
    {% if query %}
        <p class="text-muted">Results for: "<strong>{{ query }}</strong>"</p>
        <p class="text-muted">Found {{ books|length }} book(s)</p>
    {% else %}
        <p class="text-muted">Enter a search term to find books</p>
    {% endif %}
</div>

{% if books %}
<div class="row">
    {% for book in books %}
    <div class="col-md-4 mb-4">
        <div class="card book-card">
            <div class="card-body">
                <h6 class="book-title">{{ book.title }}</h6>
                <p class="book-author">by {{ book.author }}</p>
                <div class="d-flex justify-content-between align-items-center">
                    <span class="availability-badge badge {% if book.copies_available > 0 %}bg-success{% else %}bg-danger{% endif %}">
                        {{ book.copies_available }}/{{ book.copies_total }} available
                    </span>
                    {% if current_user.is_authenticated and book.copies_available > 0 %}
                        <a href="{{ url_for('main.borrow_book', book_id=book.id) }}" 
                           class="btn btn-sm btn-primary">Borrow</a>
                    {% elif current_user.is_authenticated %}
                        <button class="btn btn-sm btn-secondary" disabled>Unavailable</button>
                    {% else %}
                        <a href="{{ url_for('auth.login') }}" class="btn btn-sm btn-outline-primary">Login to Borrow</a>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
    {% endfor %}
</div>
{% elif query %}
<div class="text-center py-5">
    <i class="bi bi-search text-muted" style="font-size: 4rem;"></i>
    <h4 class="mt-3 text-muted">No books found</h4>
    <p class="text-muted">Try searching with different keywords</p>
</div>
{% endif %}
{% endblock %}